import { testAction, createActionContext } from '@lark-opdev/block-basekit-server-api';

async function test() {
    // 创建执行上下文
    const actionContext = await createActionContext();

    // 测试数据
    const testData = {
        purchaseId: '202507140002',
        purchaseDetails: `
        物料名称:白雪三仓白板笔可擦 | 规格型号:1 | 计量单位:支 | 标准单价:3.000000 | 采购价格(元):2.180000 | 采购数量:3.000000;

物料名称:三层科目分类袋L型深蓝 | 规格型号:A4 | 计量单位:件 | 标准单价:7.600000 | 采购价格(元):1.000000 | 采购数量:1.00000;

物料名称:雄狮WE-607水擦笔 | 规格型号:WE-607 | 计量单位:支 | 标准单价:2.000000 | 采购价格(元):2.000000 | 采购数量:5.000000;

物料名称:电动真空袋抽气泵HUAYAN | 规格型号:HUAYAN | 计量单位:个 | 标准单价:27.840000 | 采购价格(元):27.840000 | 采购数量:1.000000;

物料名称:摄影器材套装 | 规格型号:柔光布+2.8米灯架+转盘转接头 | 计量单位:套 | 标准单价:143.000000 | 采购价格(元):143.000000 | 采购数量:1.000000;

物料名称:灯光支架80*200cm | 规格型号:80*200cm | 计量单位:个 | 标准单价:40.850000 | 采购价格(元):40.850000 | 采购数量:1.000000;

物料名称:支架横杆1.35m | 规格型号:1.35m | 计量单位:个 | 标准单价:14.250000 | 采购价格(元):14.250000 | 采购数量:2.000000;

物料名称:四角户外野营地垫米白 | 规格型号:210*210cm | 计量单位:个 | 标准单价:43.370000 | 采购价格(元):43.370000 | 采购数量:1.000000;

物料名称:八角户外野营超大地垫 | 规格型号:325*290cm | 计量单位:个 | 标准单价:55.370000 | 采购价格(元):55.370000 | 采购数量:1.000000;

物料名称:爱图仕45保荣口柔光箱 | 规格型号:45cm | 计量单位:个 | 标准单价:150.000000 | 采购价格(元):150.000000 | 采购数量:1.000000;

物料名称:爱图仕艾蒙拉60X摄影等黑色 | 规格型号:黑色 | 计量单位:个 | 标准单价:660.000000 | 采购价格(元):660.000000 | 采购数量:1.000000;

物料名称:得力DL-770DW打印机 | 规格型号:DL-770DW | 计量单位:件 | 标准单价:329.000000 | 采购价格(元):329.000000 | 采购数量:1.000000`
    };

    try {
        // 执行测试
        const result = await testAction(testData, actionContext);
        console.log('✅ 测试成功，结果：', result);
    } catch (error) {
        console.error('❌ 测试失败：', error);
    }
}

test();


